@using static IndustrialContoroler.Constants.Permissions

@inject RoleManager<IdentityRole> _roleManager
@inject UserManager<AppUsers> _userManager
@inject SignInManager<AppUsers> _signInManager
@using IndustrialContoroler.Constants
@using Microsoft.AspNetCore.Authorization
@inject IAuthorizationService AuthorizationService
@inject IndustrialContorolerDatabaseContext _context

@inject IAuthorizationService AuthorizationService
@inject IAuthorizationService AuthorizationService
@{

    var cuurentUser = await _userManager.FindByNameAsync(User.Identity?.Name);


}
<!DOCTYPE html>

<html lang="en"
      class="light-style layout-navbar-fixed layout-menu-fixed"
      dir="rtl"
      data-theme="theme-default"
      data-assets-path="../../assets/"
      data-template="vertical-menu-template">
<head id="layoutheade">
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title> نظام الرقابة الصناعية </title>

    <meta name="description" content="" />


    <!-- Maps -->
    <link rel="stylesheet" href="~/leaflet/leaflet.css" />



    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet" href="~/assets/vendor/fonts/boxicons.css" />
    <link rel="stylesheet" href="~/assets/vendor/fonts/fontawesome.css" />
    <link rel="stylesheet" href="~/assets/vendor/fonts/flag-icons.css" />

    <!--font-Almarai-->
   <link rel="stylesheet" href="~/css/font-almarai.css" />
   <link rel="stylesheet" href="~/css/font-cairo.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="~/assets/vendor/css/rtl/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="~/assets/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="~/assets/css/demo.css" />
    <link rel="stylesheet" href="" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="~/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/typeahead-js/typeahead.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/bootstrap-select/bootstrap-select.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/select2/select2.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/flatpickr/flatpickr.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/typeahead-js/typeahead.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/tagify/tagify.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/formvalidation/dist/css/formValidation.min.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/animate-css/animate.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css" />
    <link rel="stylesheet" href="~/assets/vendor/libs/swiper/swiper.css" />

    <!-- Page CSS-->
    <link rel="stylesheet" href="~/assets/vendor/css/pages/page-profile.css" />
    <link rel="stylesheet" href="~/assets/vendor/css/pages/page-pricing.css" />
    <link rel="stylesheet" type="text/css" href="~/assets/css-add/plugins/forms/wizard.css">
    <link rel="stylesheet" href="~/assets/vendor/css/pages/page-faq.css" />
    <link rel="stylesheet" href="~/assets/vendor/css/pages/ui-carousel.css" />
    <link rel="stylesheet" href="~/assets/vendor/css/pages/page-account-settings.css" />

    <!-- Helpers -->
    <script src="~/assets/vendor/js/helpers.js"></script>

    
    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Template customizer: To hide customizer set displayCustomizer value false in config.js.  -->
    <script src="~/assets/vendor/js/template-customizer.js"></script>
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="~/assets/js/config.js"></script>
</head>

<body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <!-- Menu -->

            <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
                <div class="app-brand demo">
                    <a href="#" class="app-brand-link">
                        <!--me logo-->
                        <span class="app-brand-logo demo">
                            <svg width="26px"
                                 height="26px"
                                 viewBox="0 0 26 26"
                                 version="1.1"
                                 xmlns="http://www.w3.org/2000/svg"
                                 xmlns:xlink="http://www.w3.org/1999/xlink">
                                <!--الشعار-->
                                <title>نظام الرقابة الصناعية</title>
                                <defs>
                                    <linearGradient x1="50%" y1="0%" x2="50%" y2="100%" id="linearGradient-1">
                                        <stop stop-color="#5A8DEE" offset="0%"></stop>
                                        <stop stop-color="#699AF9" offset="100%"></stop>
                                    </linearGradient>
                                    <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="linearGradient-2">
                                        <stop stop-color="#FDAC41" offset="0%"></stop>
                                        <stop stop-color="#E38100" offset="100%"></stop>
                                    </linearGradient>
                                </defs>
                                <g id="Pages" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <g id="Login---V2" transform="translate(-667.000000, -290.000000)">
                                        <g id="Login" transform="translate(519.000000, 244.000000)">
                                            <g id="Logo" transform="translate(148.000000, 42.000000)">
                                                <g id="icon" transform="translate(0.000000, 4.000000)">
                                                    <path d="M13.8863636,4.72727273 C18.9447899,4.72727273 23.0454545,8.82793741 23.0454545,13.8863636 C23.0454545,18.9447899 18.9447899,23.0454545 13.8863636,23.0454545 C8.82793741,23.0454545 4.72727273,18.9447899 4.72727273,13.8863636 C4.72727273,13.5423509 4.74623858,13.2027679 4.78318172,12.8686032 L8.54810407,12.8689442 C8.48567157,13.19852 8.45300462,13.5386269 8.45300462,13.8863636 C8.45300462,16.887125 10.8856023,19.3197227 13.8863636,19.3197227 C16.887125,19.3197227 19.3197227,16.887125 19.3197227,13.8863636 C19.3197227,10.8856023 16.887125,8.45300462 13.8863636,8.45300462 C13.5386269,8.45300462 13.19852,8.48567157 12.8689442,8.54810407 L12.8686032,4.78318172 C13.2027679,4.74623858 13.5423509,4.72727273 13.8863636,4.72727273 Z"
                                                          id="Combined-Shape"
                                                          fill="#4880EA"></path>
                                                    <path d="M13.5909091,1.77272727 C20.4442608,1.77272727 26,7.19618701 26,13.8863636 C26,20.5765403 20.4442608,26 13.5909091,26 C6.73755742,26 1.18181818,20.5765403 1.18181818,13.8863636 C1.18181818,13.540626 1.19665566,13.1982714 1.22574292,12.8598734 L6.30410592,12.859962 C6.25499466,13.1951893 6.22958398,13.5378796 6.22958398,13.8863636 C6.22958398,17.8551125 9.52536149,21.0724191 13.5909091,21.0724191 C17.6564567,21.0724191 20.9522342,17.8551125 20.9522342,13.8863636 C20.9522342,9.91761479 17.6564567,6.70030817 13.5909091,6.70030817 C13.2336969,6.70030817 12.8824272,6.72514561 12.5388136,6.77314791 L12.5392575,1.81561642 C12.8859498,1.78721495 13.2366963,1.77272727 13.5909091,1.77272727 Z"
                                                          id="Combined-Shape2"
                                                          fill="url(#linearGradient-1)"></path>
                                                    <rect id="Rectangle"
                                                          fill="url(#linearGradient-2)"
                                                          x="0"
                                                          y="0"
                                                          width="7.68181818"
                                                          height="7.68181818"></rect>
                                                </g>
                                            </g>
                                        </g>
                                    </g>
                                </g><!--end-->
                            </svg>
                        </span>
                        <span class="app-brand-text demo menu-text fw-bold ms-2" style=" font-size:25px; "> الرقابة الصناعية</span>
                    </a>
                    <!--زر اغلاق الواجهه الجانبية-->
                    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
                        <i class="bx menu-toggle-icon fs-4 d-none d-xl-block align-middle"></i>
                        <i class="bx bx-x bx-sm d-xl-none d-block align-middle"></i>
                    </a>
                    <!-- نهاية الشعار-->
                </div>

                <div class="menu-divider mt-0"></div>

                <div class="menu-inner-shadow"></div>
                <ul style="font-family: 'Almarai', sans-serif; font-size:18px;" class="menu-inner py-1">
                    <!------------------الرئيسية---------------------->
                    <li class="menu-item" >
                        <a asp-area="" asp-controller="Home" asp-action="Index" class="menu-link">
                            <i class="menu-icon tf-icons bx bx-home-circle"></i>
                            <div data-i18n="الرئيسية">الرئيسية</div>
                        </a>
                    </li>

                    <!------------------------ ادخال بيانات المنشأة---------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.CreateFacility.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-area="" asp-controller="CreateFacility" asp-action="FacilityMainData" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-detail"></i>
                                <div data-i18n="بيانات المنشأة">بيانات المنشأة</div>
                            </a>
                        </li>
                    }
                    <!-----------    -------------الطلبات---------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Request.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-area="" asp-controller="Request" asp-action="Index" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-copy-alt"></i>
                                <div data-i18n="الطلبات">الطلبات</div>
                            </a>
                        </li>

                    }
                    <!------------------------استمارات الزيارات الميدانية---------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.FieldVisitForms.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-controller="FieldVisitForms" asp-action="Index" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-detail"></i>
                                <div data-i18n="استمارات الزيارات الميدانية">استمارات الزيارات الميدانية</div>
                            </a>
                        </li>


                    }
                    <!------------------------بحث وإستعلام---------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Search.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a href="javascript:void(0);" class="menu-link menu-toggle">
                                <i class="menu-icon tf-icons bx bx-search-alt"></i>
                                <div data-i18n="البحث والاستعلام">البحث والاستعلام</div>
                            </a>
                            <ul class="menu-sub">
                                 <li class="menu-item">
                                    <a asp-area="" asp-controller="Search" asp-action="FreeSearch" class="menu-link">
                                        <div data-i18n="بحث حر">بحث حر </div>
                                    </a>
                                </li>
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Search" asp-action="SearchInd" class="menu-link">
                                        <div data-i18n="مسح صناعي">مسح صناعي</div>
                                    </a>
                                </li>
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Search" asp-action="SearchEco" class="menu-link">
                                        <div data-i18n="الأسم التجاري">الأسم التجاري</div>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    }
                    <!--------------------------التقارير------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Reports.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-controller="Reports" asp-action="Index" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-receipt"></i>
                                <div>التقارير</div>
                            </a>

                        </li>
                    }
                    <!------------------------رسوم بيانية---------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Charts.View).Result.Succeeded)
                    {
                        <li class="menu-item" style="">
                            <a href="javascript:void(0);" class="menu-link menu-toggle">
                                <i class="menu-icon tf-icons bx bx-bar-chart-alt-2"></i>
                                <div data-i18n="رسوم بيانية">رسوم بيانية </div>
                            </a>

                            <ul class="menu-sub">


                                <li class="menu-item">
                                    <a asp-controller="Charts" asp-action="char1" class="menu-link">
                                        <div data-i18n="نموذج بياني 1">نموذج بياني 1</div>
                                    </a>
                                </li>
                                <li class="menu-item">
                                    <a asp-controller="Charts" asp-action="char2" class="menu-link">
                                        <div data-i18n="نموذج بياني 2">نموذج بياني 2</div>
                                    </a>
                                </li>
                                <li class="menu-item">
                                    <a asp-controller="Charts" asp-action="char3" class="menu-link">
                                        <div data-i18n="نموذج بياني 3">نموذج بياني 3</div>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    }
                    <!--------------------------إحصائيات------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Statistics.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-controller="Statistics" asp-action="Index" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-chart"></i>
                                <div data-i18n="إحصائيات">إحصائيات</div>
                            </a>
                        </li>

                    }




                    <!--------------------------إدارة المستخدمين ------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Account.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-area="" asp-controller="Account" asp-action="Register" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-user"></i>
                                <div data-i18n="إدارة المستخدمين ">إدارة المستخدمين</div>
                            </a>
                        </li>
                    }
                    <!--------------------------إدارة الصلاحيات ------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Roles.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-area="" asp-controller="Roles" asp-action="Role" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-check-shield"></i>
                                <div data-i18n="إدارة الصلاحيات">إدارة الصلاحيات</div>
                            </a>
                        </li>

                    }

                    <!--example-->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.WorkFlowRequest.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-area="" asp-controller="WorkFlowRequest" asp-action="index" class="menu-link">
                                <i class="menu-icon tf-icons bx bx-calendar"></i>
                                <div data-i18n="سير العمليات">سير العمليات  </div>
                            </a>
                        </li>
                    }
                    <!--example-->
                    <!--------------------------الإشعارات------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Notification.View).Result.Succeeded)
                    {
                        if (User.IsInRole(Helper.ReEmployee) || User.IsInRole(Helper.TechnicalSpecialist))
                        {
                            var notifNum = _context.Notis.Where(x => x.IsDeleted.Equals(false) && (x.Receiver == cuurentUser.Id || x.Receiver == null) && x.IsRead.Equals(false)).OrderByDescending(x => x.Date);


                            var n = @notifNum.Count();
                            if (n > 0)
                            {
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Notification" asp-action="index" class="menu-link">
                                        <i b-56ppygw43s="" class="bx bx-chat bx-sm"></i>
                                        <div data-i18n="الإشعارات">الإشعارات </div>
                                      
                                    </a>
                                </li>
                            }
                            else
                            {
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Notification" asp-action="index" class="menu-link">
                                        <i b-56ppygw43s="" class="bx bx-chat bx-sm"></i>
                                        <div data-i18n="الإشعارات">الإشعارات </div>

                                    </a>
                                </li>
                            }


                        }

                        else if (User.IsInRole(Helper.SuperAdmin) || User.IsInRole(Helper.SysAdminsitrator)||User.IsInRole(Helper.Progreammer))
                        {

                            var notifNum = _context.Notis.Where(x => x.Receiver == cuurentUser.Id && x.IsDeleted.Equals(false) && x.IsRead.Equals(false)).OrderByDescending(x => x.Date);

                            var n = @notifNum.Count();
                            if (n > 0)
                            {
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Notification" asp-action="index" class="menu-link">
                                        <i b-56ppygw43s="" class="bx bx-chat bx-sm"></i>
                                        <div data-i18n="الإشعارات">الإشعارات </div>
                                      
                                    </a>
                                </li>
                            }
                            else
                            {
                                <li class="menu-item">
                                    <a asp-area="" asp-controller="Notification" asp-action="index" class="menu-link">
                                        <i b-56ppygw43s="" class="bx bx-chat bx-sm"></i>
                                        <div data-i18n="الإشعارات">الإشعارات </div>

                                    </a>
                                </li>
                            }
                        }
                    }
                    <!--------------------------خرائط------------------------->
                    @if (AuthorizationService.AuthorizeAsync(User, Permissions.Maps.View).Result.Succeeded)
                    {
                        <li class="menu-item">
                            <a asp-controller="Maps" asp-action="Index" class="menu-link">
                                <i class="bx bxs-location-plus"></i>
                                <div data-i18n="خرائط">خرائط </div>
                            </a>
                        </li>
                    }
                    <!--------------------------تسجيل خروج------------------------->
                    <li class="menu-item">
                        <a asp-controller="Account" asp-action="Logout" class="menu-link">
                            <i class="bx bx-power-off me-2"></i>
                            <div data-i18n="تسجيل خروج">تسجيل خروج </div>
                        </a>
                    </li>

                </ul>

            </aside> <!--نهاية القائمة الجانبية-->
            <!-- / Menu -->
            <!-- Layout container -->
            <div class="layout-page">
                <!-- Navbar -->
                <!-- Navbar -->
                <nav class="layout-navbar navbar navbar-expand-xl align-items-center bg-navbar-theme" id="layout-navbar">
                    <div class="container-fluid">
                        <div class="layout-menu-toggle navbar-nav d-xl-none align-items-xl-center me-3 me-xl-0">
                            <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                                <i class="bx bx-menu bx-sm"></i>
                            </a>
                        </div>



                        <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">


                            <!---------------------------- page title --------------------------------->
                            <!---------------------------- /page title --------------------------------->
                            <!---------------------------- Search --------------------------------->
                            <!---------------------------- /Search --------------------------------->



                            <ul style="font-family: 'Cairo', sans-serif; font-size:16px;" class="navbar-nav flex-row align-items-center ms-auto">

                                <!---------------------------- Style Switcher -------------------------->
                                <li class="nav-item me-2 me-xl-0">
                                    <a class="nav-link style-switcher-toggle hide-arrow" href="javascript:void(0);">
                                        <i class="bx bx-sm"></i>
                                    </a>
                                </li>
                                <!---------------------------- /Style Switcher -------------------------->
                                <!--------------------------- Notification -------------------------------->
                                <!------------------------/ Notification -------------------------------->
                                @{
                                    if (User.IsInRole(Helper.ReEmployee) || User.IsInRole(Helper.TechnicalSpecialist))
                                    {
                                        var notifNum = _context.Notis.Where(x => x.IsDeleted.Equals(false) &&
                                        (x.Receiver == cuurentUser.Id) && x.IsRead.Equals(false)).OrderByDescending(x => x.Date);
                                        var nIconTop = @notifNum.Count();
                                        if (nIconTop > 0)
                                        {
                                            <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                <a class="nav-link dropdown-toggle hide-arrow"
                                                   href="javascript:void(0);"
                                                   data-bs-toggle="dropdown"
                                                   data-bs-auto-close="outside"
                                                   aria-expanded="false">
                                                    <i class="bx bx-chat bx-sm"></i>

                                                    <span class="badge rounded-pill badge-notifications bg-success">@notifNum.Count()</span>

                                                </a>


                                                <ul class="dropdown-menu dropdown-menu-end py-0">
                                                    <li class="dropdown-menu-header border-bottom">
                                                        <div class="dropdown-header d-flex align-items-center py-3">
                                                            <h5 class="text-body me-auto mb-0" style="font-family: 'Almarai', sans-serif; font-size:16px;">الأشعارات</h5>
                                                            <form method="post" action="@Url.Action("MarkAllAsRead", "Notification")">
                                                                <a href="javascript:void(0)"
                                                                   class="dropdown-notifications-all text-body"
                                                                   data-bs-toggle="tooltip"
                                                                   data-bs-placement="top"
                                                                   title=" استلام جميع الأشعارات">
                                                                    <button type="submit" style="border:none;">  <i class="bx fs-4 bx-envelope-open" style="color:blue;"></i>   </button>


                                                                </a>
                                                            </form>
                                                        </div>
                                                    </li>


                                                    @foreach (var item in @notifNum.Take(5))
                                                    {
                                                        <li class="dropdown-notifications-list scrollable-container">
                                                            <ul class="list-group list-group-flush">


                                                                <li class="list-group-item list-group-item-action dropdown-notifications-item">


                                                                    <div class="d-flex">
                                                                        <div class="flex-shrink-0 me-3">
                                                                            <div class="avatar">

                                                                                <img src="@Helper.PathImageuser/@item.ImageSender" class="w-px-40 h-auto rounded-circle" />

                                                                            </div>
                                                                        </div>
                                                                        <div class="flex-grow-1">
                                                                            <h6 class="mb-1" style="font-family: 'Almarai', sans-serif; font-size:16px;"> @item.Sender</h6>
                                                                            <p class="mb-0" style="font-family: 'Almarai', sans-serif; font-size:14px; max-width:150px; overflow:hidden; text-overflow: ellipsis; white-space:nowrap;">  @item.Description </p>
                                                                            @{
                                                                                           TimeSpan elspsed = DateTime.Now - item.Date;
                                                                              if (elspsed.TotalMinutes < 1)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalSeconds.ToString("0")  ثانية</small>

                                                                                }
                                                                               else if (elspsed.TotalMinutes < 60)
                                                                                {

                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalMinutes.ToString("0")  دقيقة</small>

                                                                                }
                                                                               
                                                                                else if (elspsed.TotalMinutes > 60 && elspsed.TotalMinutes<120)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ ساعة    </small>

                                                                                }
                                                                                else if (elspsed.TotalMinutes > 60 && elspsed.TotalMinutes < 1440)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalHours.ToString("0")  ساعة</small>

                                                                                }   
                                 
                                                                                else if (elspsed.TotalHours > 24 && elspsed.TotalHours<48)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ يوم </small>

                                                                                }
                                                                                else if (elspsed.TotalHours > 24 && elspsed.TotalHours<=240)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalDays.ToString("0")  ايام</small>

                                                                                }
                                                                                else if (elspsed.TotalHours > 24 )
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalDays.ToString("0")  يوم</small>

                                                                                }

                                                                            }
                                                                        </div>
                                                                        <div class="dropdown-notifications-actions flex-shrink-0">
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-read">
                                                                                <span class="badge badge-dot"></span>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-archive">
                                                                                <span class="bx bx-x"><a asp-route-Id="@item.Id" asp-controller="Notification" asp-action="Detail">عرض</a></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>

                                                                </li>

                                                            </ul>

                                                        </li>
                                                    }

                                                    <li class="dropdown-menu-footer border-top">
                                                        <a asp-action="index" asp-controller="Notification" class="dropdown-item d-flex justify-content-center p-3" style="font-family: 'Almarai', sans-serif; font-size:16px;">
                                                            عرض جميع الاشعارات
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                        }
                                        else
                                        {

                                            <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                <a class="nav-link dropdown-toggle hide-arrow"
                                                   href="javascript:void(0);"
                                                   data-bs-toggle="dropdown"
                                                   data-bs-auto-close="outside"
                                                   aria-expanded="false">
                                                    <i class="bx bx-chat bx-sm"></i>

                                                </a>


                                                <ul class="dropdown-menu dropdown-menu-end py-0">
                                                    <li class="dropdown-menu-header border-bottom">
                                                        <div class="dropdown-header d-flex align-items-center py-3">
                                                            <h5 class="text-body me-auto mb-0" style="font-family: 'Almarai', sans-serif; font-size:16px;">الأشعارات</h5>
                                                            <a href="javascript:void(0)"
                                                               class="dropdown-notifications-all text-body"
                                                               data-bs-toggle="tooltip"
                                                               data-bs-placement="top"
                                                               title=" استلام جميع الأشعارات    ">

                                                            </a>
                                                        </div>
                                                    </li>


                                                    @foreach (var item in notifNum.Take(5))
                                                    {
                                                        <li class="dropdown-notifications-list scrollable-container">
                                                            <ul class="list-group list-group-flush">


                                                                <li class="list-group-item list-group-item-action dropdown-notifications-item">
                                                                    <div class="d-flex">
                                                                        <div class="flex-shrink-0 me-3">
                                                                            <div class="avatar">
                                                                                <img src="@Helper.PathImageuser/@item.ImageSender" class="w-px-40 h-auto rounded-circle" />

                                                                            </div>
                                                                        </div>
                                                                        <div class="flex-grow-1">
                                                                            <h6 class="mb-1" style="font-family: 'Almarai', sans-serif; font-size:16px;"> @item.Sender</h6>
                                                                            <p class="mb-0" style="font-family: 'Almarai', sans-serif; font-size:14px;">  @item.Description </p>
                                                                            @{
                                                                                TimeSpan elspsed = DateTime.Now - item.Date;
                                                                                if (elspsed.TotalMinutes < 60)
                                                                                {

                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalMinutes.ToString("0")  دقيقة</small>

                                                                                }
                                                                                else if (elspsed.TotalMinutes < 1)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalMilliseconds.ToString("0")  ثانية</small>

                                                                                }
                                                                                else
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalHours.ToString("0")  ساعة</small>

                                                                                }

                                                                            }
                                                                        </div>
                                                                        <div class="dropdown-notifications-actions flex-shrink-0">
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-read">
                                                                                <span class="badge badge-dot"></span>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-archive">
                                                                                <span class="bx bx-x"></span>
                                                                            </a>
                                                                        </div>

                                                                    </div>
                                                                </li>

                                                            </ul>

                                                        </li>
                                                    }

                                                    <li class="dropdown-menu-footer border-top">
                                                        <a href="javascript:void(0);" class="dropdown-item d-flex justify-content-center p-3" style="font-family: 'Almarai', sans-serif; font-size:14px;">
                                                            لايوجد أي أشعارات جديدة
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                        }
                                    }
                                    else if (User.IsInRole(Helper.SuperAdmin) || User.IsInRole(Helper.SysAdminsitrator)||User.IsInRole(Helper.Progreammer))
                                    {

                                        var notifNum = _context.Notis.Where(x => x.Receiver == cuurentUser.Id
                                        && x.IsDeleted.Equals(false) && x.IsRead.Equals(false)).OrderByDescending(x => x.Date);


                                        var nIconTop = @notifNum.Count();
                                        if (nIconTop > 0)
                                        {
                                            <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                <a class="nav-link dropdown-toggle hide-arrow"
                                                   href="javascript:void(0);"
                                                   data-bs-toggle="dropdown"
                                                   data-bs-auto-close="outside"
                                                   aria-expanded="false">
                                                    <i class="bx bx-chat bx-sm"></i>

                                                    <span class="badge rounded-pill badge-notifications bg-success">@notifNum.Count()</span>

                                                </a>


                                                <ul class="dropdown-menu dropdown-menu-end py-0">
                                                    <li class="dropdown-menu-header border-bottom">
                                                        <div class="dropdown-header d-flex align-items-center py-3">
                                                            <h5 class="text-body me-auto mb-0" style="font-family: 'Almarai', sans-serif; font-size:16px;">الأشعارات</h5>
                                                            <form method="post" action="@Url.Action("MarkAllAsRead", "Notification")">
                                                                <a href="javascript:void(0)"
                                                                   class="dropdown-notifications-all text-body"
                                                                   data-bs-toggle="tooltip"
                                                                   data-bs-placement="top"
                                                                   title=" استلام جميع الأشعارات">
                                                                    <button type="submit" style="border:none;">  <i class="bx fs-4 bx-envelope-open" style="color:blue;"></i>   </button>


                                                                </a>
                                                            </form>
                                                        </div>
                                                    </li>


                                                    @foreach (var item in @notifNum.Take(5))
                                                    {
                                                        <li class="dropdown-notifications-list scrollable-container">
                                                            <ul class="list-group list-group-flush">


                                                                <li class="list-group-item list-group-item-action dropdown-notifications-item">

                                                                    <div class="d-flex">


                                                                        <div class="flex-shrink-0 me-3">
                                                                            <div class="avatar">
                                                                                <img src="@Helper.PathImageuser/@item.ImageSender" class="w-px-40 h-auto rounded-circle" />

                                                                            </div>
                                                                        </div>
                                                                        <div class="flex-grow-1">
                                                                            <h6 class="mb-1" style="font-family: 'Almarai', sans-serif; font-size:16px;"> @item.Sender</h6>
                                                                            <p class="mb-0" style="font-family: 'Almarai', sans-serif; font-size:14px;">  @item.Description </p>
                                                                              @{
                                                                                TimeSpan elspsed = DateTime.Now - item.Date;
                                                                              if (elspsed.TotalMinutes < 1)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalSeconds.ToString("0")  ثانية</small>

                                                                                }
                                                                               else if (elspsed.TotalMinutes < 60)
                                                                                {

                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalMinutes.ToString("0")  دقيقة</small>

                                                                                }
                                                                               
                                                                                else if (elspsed.TotalMinutes > 60 && elspsed.TotalMinutes<120)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ ساعة    </small>

                                                                                }
                                                                                else if (elspsed.TotalMinutes > 60 && elspsed.TotalMinutes < 1440)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalHours.ToString("0")  ساعة</small>

                                                                                }   
                                 
                                                                                else if (elspsed.TotalHours > 24 && elspsed.TotalHours<48)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ يوم </small>

                                                                                }
                                                                                else if (elspsed.TotalHours > 24 && elspsed.TotalHours<=240)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalDays.ToString("0")  ايام</small>

                                                                                }
                                                                                else if (elspsed.TotalHours > 24 )
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalDays.ToString("0")  يوم</small>

                                                                                }

                                                                            }
                                                                        </div>
                                                                        <div class="dropdown-notifications-actions flex-shrink-0">
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-read">
                                                                                <span class="badge badge-dot"></span>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-archive">
                                                                                <span class="bx bx-x"><a asp-route-Id="@item.Id" asp-controller="Notification" asp-action="Detail">عرض</a></span>

                                                                            </a>
                                                                        </div>

                                                                    </div>


                                                                </li>

                                                            </ul>

                                                        </li>
                                                    }

                                                    <li class="dropdown-menu-footer border-top">
                                                        <a asp-action="index" asp-controller="Notification" class="dropdown-item d-flex justify-content-center p-3" style="font-family: 'Almarai', sans-serif; font-size:14px;">
                                                            عرض جميع الاشعارات
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                        }
                                        else
                                        {

                                            <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                <a class="nav-link dropdown-toggle hide-arrow"
                                                   href="javascript:void(0);"
                                                   data-bs-toggle="dropdown"
                                                   data-bs-auto-close="outside"
                                                   aria-expanded="false">
                                                    <i class="bx bx-chat bx-sm"></i>

                                                </a>


                                                <ul class="dropdown-menu dropdown-menu-end py-0">
                                                    <li class="dropdown-menu-header border-bottom">
                                                        <div class="dropdown-header d-flex align-items-center py-3">
                                                            <h5 class="text-body me-auto mb-0" style="font-family: 'Almarai', sans-serif; font-size:16px;">الأشعارات</h5>
                                                            <a href="javascript:void(0)"
                                                               class="dropdown-notifications-all text-body"
                                                               data-bs-toggle="tooltip"
                                                               data-bs-placement="top"
                                                               title=" استلام جميع الأشعارات    ">
                                                                <i class="bx fs-4 bx-envelope-open"></i>
                                                            </a>
                                                        </div>
                                                    </li>


                                                    @foreach (var item in notifNum.Take(5))
                                                    {
                                                        <li class="dropdown-notifications-list scrollable-container">
                                                            <ul class="list-group list-group-flush">


                                                                <li class="list-group-item list-group-item-action dropdown-notifications-item">
                                                                    <div class="d-flex">
                                                                        <div class="flex-shrink-0 me-3">
                                                                            <div class="avatar">
                                                                                <img src="@Helper.PathImageuser/@item.ImageSender" class="w-px-40 h-auto rounded-circle" />

                                                                            </div>
                                                                        </div>
                                                                        <div class="flex-grow-1">
                                                                            <h6 class="mb-1" style="font-family: 'Almarai', sans-serif; font-size:16px;"> @item.Sender</h6>
                                                                            <p class="mb-0" style="font-family: 'Almarai', sans-serif; font-size:14px;">  @item.Description </p>
                                                                            @{
                                                                                TimeSpan elspsed = DateTime.Now - item.Date;
                                                                                if (elspsed.TotalMinutes < 60)
                                                                                {

                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalMinutes.ToString("0")  دقيقة</small>

                                                                                }
                                                                                else if (elspsed.TotalMinutes < 1)
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">منذ @elspsed.TotalMilliseconds.ToString("0")  ثانية</small>

                                                                                }
                                                                                else
                                                                                {
                                                                                    <small class="text-muted far fa-clock mr-1" style="font-family: 'Almarai', sans-serif; font-size:14px;">  منذ   @elspsed.TotalHours.ToString("0")  ساعة</small>

                                                                                }

                                                                            }
                                                                        </div>
                                                                        <div class="dropdown-notifications-actions flex-shrink-0">
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-read">
                                                                                <span class="badge badge-dot"></span>
                                                                            </a>
                                                                            <a href="javascript:void(0)" class="dropdown-notifications-archive">
                                                                                <span class="bx bx-x"></span>
                                                                            </a>
                                                                        </div>
                                                                    </div>
                                                                </li>

                                                            </ul>

                                                        </li>
                                                    }

                                                    <li class="dropdown-menu-footer border-top">
                                                        <a href="javascript:void(0);" class="dropdown-item d-flex justify-content-center p-3" style="font-family: 'Almarai', sans-serif; font-size:14px;">
                                                            لايوجد أي أشعارات جديدة
                                                        </a>
                                                    </li>
                                                </ul>
                                            </li>
                                        }
                                    }

                                }

                                <!------------------------/ Notification for request and facility -------------------------------->
                                <ul class="navbar-nav ml-auto">


                                    <!-- Messages Dropdown Menu -->
                                    <!-- Notifications Dropdown Menu -->
                                    @{
                                        if (User.IsInRole(Helper.SuperAdmin) ||User.IsInRole(Helper.Progreammer))
                                        {
                                            var ReuquestNew = _context.Requests.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.ReRequestState.Equals(1));
                                            var FaciliViledNew = _context.Facilities.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.FaReference.Equals(2));
                                            var countReuquestNew = ReuquestNew.Count();
                                            var countFaciliViledNew = FaciliViledNew.Count();
                                            var sumNoti = countReuquestNew + countFaciliViledNew;



                                            if (sumNoti > 0)
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                        <span class="badge rounded-pill badge-notifications bg-danger">@sumNoti</span>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                                        <span class="dropdown-item dropdown-header" style="font-family: 'Cairo', sans-serif; font-size:16px;">لديك @sumNoti أشعارات  </span>
                                                        @if (countReuquestNew > 0)
                                                        {
                                                            <div class="dropdown-divider"></div>
                                                            <a asp-action="index" asp-controller="Request" class="dropdown-item">
                                                                <i class="fas fa-envelope mr-2"></i> لديك  @countReuquestNew طلبات جديدة
                                                            </a>
                                                        }
                                                        @if (countFaciliViledNew > 0)
                                                        {
                                                            <div class="dropdown-divider"></div>
                                                            <a asp-action="index" asp-controller="FieldVisitForms" class="dropdown-item">
                                                                <i class="fas fa-envelope mr-2"></i> لديك  @countFaciliViledNew أستمارة جديدة
                                                            </a>
                                                        }
                                                    </div>
                                                </li>
                                            }
                                            else
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">

                                                        <div class="dropdown-divider"></div>

                                                        <a href="#" class="dropdown-item">
                                                            <i class="bx bx-message-x"></i>  ليس لديك طلبات جديدة
                                                        </a>

                                                        <div class="dropdown-divider"></div>
                                                        <a href="#" class="dropdown-item">
                                                            <i class="bx bx-message-x"></i> ليس لديك أي استمارة جديده
                                                        </a>


                                                    </div>
                                                </li>
                                            }
                                        }

                                        else if (User.IsInRole(Helper.TechnicalSpecialist))
                                        {
                                            var ReuquestNew = _context.Requests.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.UserId == cuurentUser.Id && x.ReRequestState.Equals(2));
                                            var FaciliViledToEdit = _context.Facilities.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.FaReference.Equals(5));
                                            var countReuquestNew = ReuquestNew.Count();
                                            var countFaciliViledToEdit = FaciliViledToEdit.Count();
                                            var sumNoti = countReuquestNew + countFaciliViledToEdit;

                                            if (sumNoti > 0)
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                        <span class="badge rounded-pill badge-notifications bg-danger"> @sumNoti </span>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                                        <span class="dropdown-item dropdown-header" style="font-family: 'Cairo', sans-serif; font-size:16px;">لديك @sumNoti أشعارات </span>
                                                        <div class="dropdown-divider"></div>
                                                        @if (countReuquestNew > 0)
                                                        {
                                                            <a asp-action="index" asp-controller="Request" class="dropdown-item">
                                                                <i class="fas fa-envelope mr-2"></i> لديك  @countReuquestNew طلبات جديدة
                                                            </a>
                                                        }

                                                        @if (countFaciliViledToEdit > 0)
                                                        {
                                                            <div class="dropdown-divider"></div>
                                                            <a href="@Url.Action("index","FieldVisitForms",new{id="rejectForms"})" class="dropdown-item">
                                                                <i class="bx bxs-edit"></i> لديك @countFaciliViledToEdit طلبات تعديل استمارة
                                                            </a>
                                                        }


                                                    </div>
                                                </li>
                                            }
                                            else
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                                        <span class="dropdown-item dropdown-header"> </span>
                                                        <div class="dropdown-divider"></div>
                                                        <a href="#" class="dropdown-item">
                                                            <i class="bx bx-message-x"></i>  ليس لديك طلبات جديدة
                                                        </a>

                                                        <div class="dropdown-divider"></div>
                                                        <a href="#" class="dropdown-item">
                                                            <i class="bx bxs-edit"></i> ليس لديك أي أستمارة تعديل
                                                        </a>

                                                    </div>
                                                </li>
                                            }
                                        }

                                        else if (User.IsInRole(Helper.ReEmployee))
                                        {
                                            var ReuquestAccept = _context.Facilities.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.FaReference.Equals(3));
                                            var Reuquestreject = _context.Facilities.Where(x => x.IsDeleted.Equals(false) && x.IsRead.Equals(false) && x.FaReference.Equals(4));
                                            var countReuquestAccept = ReuquestAccept.Count();
                                            var countReuquestreject = Reuquestreject.Count();
                                            var sumNot = countReuquestAccept + countReuquestreject;

                                            if (sumNot > 0)
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                        <span class="badge rounded-pill badge-notifications bg-danger">@sumNot</span>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                                                 
                                                    <div class="dropdown-header d-flex align-items-center py-3">
                                                         <h5 class="text-body me-auto mb-0" style="font-family: 'Almarai', sans-serif; font-size:16px;"> <span class="dropdown-item dropdown-header">لديك @sumNot أشعارات </span></h5>

                                                         <form method="post" action="@Url.Action("MarkRejectAndAcceptAsRead", "Request")">
                                                                <a href="javascript:void(0)"
                                                                   class="dropdown-notifications-all text-body"
                                                                   data-bs-toggle="tooltip"
                                                                   data-bs-placement="top"
                                                                   title=" استلام جميع الأشعارات">
                                                                    <button type="submit" style="border:none;">  <i class="bx fs-4 bx-envelope-open" style="color:blue;"></i>   </button>


                                                                </a>
                                                                </form>
                                                        </div>
                                                        @if (countReuquestAccept > 0)
                                                        {
                                                            <div class="dropdown-divider"></div>
                                                            <a href="@Url.Action("index","Request",new{id="acceptRequestsDiv"})" class="dropdown-item">

                                                                <i class="fas fa-envelope mr-2"></i>  لديك طلبات مقبولة  @countReuquestAccept
                                                            </a>
                                                        }
                                                        @if (countReuquestreject > 0)
                                                        {
                                                            <div class="dropdown-divider"></div>
                                                            <a href="@Url.Action("index","Request",new{id="rejectRequests"})" class="dropdown-item">

                                                                <i class="fas fa-users mr-2"></i>لديك طلبات مرفوظة  @countReuquestreject
                                                            </a>
                                                        }

                                                    </div>
                                                </li>
                                            }
                                            else
                                            {
                                                <li class="nav-item dropdown-notifications navbar-dropdown dropdown me-3 me-xl-2">
                                                    <a class="nav-link dropdown-toggle hide-arrow"
                                                       href="javascript:void(0);"
                                                       data-bs-toggle="dropdown"
                                                       data-bs-auto-close="outside"
                                                       aria-expanded="false">
                                                        <i class="bx bx-bell bx-sm"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">

                                                        <div class="dropdown-divider"></div>
                                                        <a href="#" class="dropdown-item">
                                                            <i class="fas fa-envelope mr-2"></i>  ليس لديك اي طلبات مقبولة
                                                        </a>

                                                        <div class="dropdown-divider"></div>
                                                        <a href="#" class="dropdown-item">
                                                            <i class="fas fa-users mr-2"></i> ليس لديك اي طلبات مرفوضة
                                                        </a>

                                                    </div>
                                                </li>
                                            }
                                        }

                                    }
                                </ul>
                                <!----------------------------------------- User ----------------------------------------->
                                @if (_signInManager.IsSignedIn(User))
                                {
                                    <li class="nav-item navbar-dropdown dropdown-user dropdown ">
                                        <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                                            <div class="avatar avatar-online">
                                                <img src="@Helper.PathImageuser/@((await _userManager.GetUserAsync(User)).ImageUser)" class="rounded-circle" />
                                            </div>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-end p-2">

                                            <li>



                                                <div class="d-flex">
                                                    <div class="flex-shrink-0 me-3">
                                                        <div class="avatar avatar-online">
                                                            <img src="@Helper.PathImageuser/@((await _userManager.GetUserAsync(User)).ImageUser)" class="rounded-circle" />
                                                        </div>
                                                    </div>
                                                    <div class="flex-grow-1">
                                                        <span class="lh-1 d-block fw-semibold">@((await _userManager.GetUserAsync(User)).FullName)</span>

                                                        @if (User.IsInRole(Helper.ReEmployee))
                                                        {
                                                            <b class="text-muted" style="font-family: 'Cairo', sans-serif; font-size:14px;">(@Helper.ReEmployee)</b>
                                                        }
                                                        @if (User.IsInRole(Helper.SuperAdmin))
                                                        {
                                                            <b class="text-muted" style="font-family: 'Cairo', sans-serif; font-size:14px;">(@Helper.SuperAdmin)</b>
                                                        }
                                                        @if (User.IsInRole(Helper.TechnicalSpecialist))
                                                        {
                                                            <b class="text-muted" style="font-family: 'Cairo', sans-serif; font-size:14px;">(@Helper.TechnicalSpecialist)</b>
                                                        }
                                                        @if (User.IsInRole(Helper.SysAdminsitrator))
                                                        {
                                                            <b class="text-muted" style="font-family: 'Cairo', sans-serif; font-size:14px;">(@Helper.SysAdminsitrator)</b>
                                                        } 
                                                        @if (User.IsInRole(Helper.Progreammer))
                                                        {
                                                            <b class="text-muted" style="font-family: 'Cairo', sans-serif; font-size:14px;">(@Helper.Progreammer)</b>
                                                        }


                                                    </div>
                                                </div>



                                            </li>


                                            <li>
                                                <div class="dropdown-divider"></div>
                                            </li>
                                            <li>
                                                <a class="dropdown-item" asp-area="" asp-controller="Account" asp-action="Profile">
                                                    <i class="bx bx-user me-2"></i>
                                                    <span class="align-middle">بياناتي</span>
                                                </a>
                                            </li>

                                            <li>
                                                <a class="dropdown-item" asp-action="Logout" asp-controller="Account" method="post">
                                                    <i class="bx bx-power-off me-2"></i>
                                                    <span class="align-middle">تسجيل الخروج</span>
                                                </a>

                                        </ul>
                                    </li>
                                }
                                <!---------------------------------------------/ User ---------------------------------------->

                            </ul>
                        </div>

                    </div>
                </nav>

                <!-- / Navbar -->
                <!----------------------------------------------------------- Content wrapper -------------------------------------------->
                <div class="content-wrapper">


                    <!-------------------------------------------- محتوى الصفحة -------------------------------------------->
                    @RenderBody()
                    <!-------------------------------------------- / محتوى الصفحة -------------------------------------------->
                    <!--------------------- Footer ------------------------->
                    <!-- / Layout page -->
                    <!--------------------- Footer ------------------------->
                    <footer class="content-footer footer bg-footer-theme">
                        <div class="container-fluid d-flex flex-column flex-md-row flex-wrap justify-content-between py-2">
                            <div class="mb-2 mb-md-0">
                                ©
                                <script>
                                    document.write(new Date().getFullYear());
                                </script>
                                , تصميم وبرمجة
                                <a href="#" class="footer-link fw-semibold">طلاب كلية الحاسوب - جامعة صنعاء</a>
                            </div>
                        </div>
                    </footer>
                    <!------------------------------ / Footer --------------------------------->

                    <div class="content-backdrop fade"></div>
                </div>
                <!-------------------------------- Content wrapper -------------------------------->
            </div>
            <!-------------------------------- / Layout page -------------------------------->
        </div>




        <!-------------------------------- Overlay -------------------------------->
        <div class="layout-overlay layout-menu-toggle"></div>

        <!-------------------------------- Drag Target Area To SlideIn Menu On Small Screens -------------------------------->
        <div class="drag-target"></div>
    </div>
    <!-------------------------------- / Layout wrapper -------------------------------->
    <!-- / Layout wrapper -->
    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="~/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="~/assets/vendor/libs/popper/popper.js"></script>
    <script src="~/assets/vendor/js/bootstrap.js"></script>
    <script src="~/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="~/assets/vendor/libs/hammer/hammer.js"></script>
    <script src="~/assets/vendor/libs/i18n/i18n.js"></script>
    <script src="~/assets/vendor/libs/typeahead-js/typeahead.js"></script>

    <script src="~/assets/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <script src="~/assets/css-add/vendors/js/vendors.min.js"></script>
    <!-- BEGIN: repeater-->
    <script src="~/assets/css-add/vendors/js/forms/repeater/jquery.repeater.min.js"></script>
    <script src="~/assets/css-add/js/scripts/forms/form-repeater.js"></script>
    <!-- END: repeater-->
    <!-- steps-->

    <script src="~/assets/css-add/vendors/js/extensions/jquery.steps.min.js"></script>
    <script src="~/assets/css-add/vendors/js/forms/validation/jquery.validate.min.js"></script>
    <script src="~/assets/css-add/js/core/app.js"></script>
    <script src="~/assets/css-add/js/scripts/forms/wizard-steps.js"></script>
    <!-- END-->
    <!-- الصيغ-->
    <script src="~/assets/css-add/js/scripts/pages/page-knowledge-base.js"></script>
    <!-- الصيغ-->
    <!-- Vendors JS -->
    <script src="~/assets/vendor/libs/select2/select2.js"></script>
    <script src="~/assets/vendor/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="~/assets/vendor/libs/moment/moment.js"></script>
    <script src="~/assets/vendor/libs/flatpickr/flatpickr.js"></script>
    <script src="~/assets/vendor/libs/typeahead-js/typeahead.js"></script>
    <script src="~/assets/vendor/libs/tagify/tagify.js"></script>
    <script src="~/assets/vendor/libs/formvalidation/dist/js/FormValidation.min.js"></script>
    <script src="~/assets/vendor/libs/formvalidation/dist/js/plugins/Bootstrap5.min.js"></script>
    <script src="~/assets/vendor/libs/formvalidation/dist/js/plugins/AutoFocus.min.js"></script>
    <script src="~/assets/vendor/libs/bootstrap-select/bootstrap-select.js"></script>
    <script src="~/assets/vendor/libs/cleavejs/cleave.js"></script>
    <script src="~/assets/vendor/libs/cleavejs/cleave-phone.js"></script>
 
    <script src="~/assets/vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.js"></script>
    
    <!-- Vendors JS table -->
    <script src="~/assets/vendor/libs/datatables/jquery.dataTables.js"></script>
    <script src="~/assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
    <script src="~/assets/vendor/libs/datatables-responsive/datatables.responsive.js"></script>
    <script src="~/assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.js"></script>
    <!-- Flat Picker -->
    <script src="~/assets/vendor/libs/moment/moment.js"></script>
    <script src="~/assets/vendor/libs/flatpickr/flatpickr.js"></script>

    <!-- Main JS -->
    <script src="~/assets/js/main.js"></script>
    <!--sweetaert-->
     <!-------------------------------------------------------->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="~/assets/vendor/libs/sweetalert2/sweetalert2.min.css">
    <script src="~/assets/vendor/libs/sweetalert2/sweetalert2.all.min.js"></script>

    <!-- Page JS -->
    <script src="~/assets/vendor/libs/swiper/swiper.js"></script>
    <script src="~/assets/js/ui-carousel.js"></script>
    <script src="~/assets/js/pages-account-settings-security.js"></script>
    <script src="~/assets/js/modal-enable-otp.js"></script>
    <script src="~/assets/js/pages-account-settings-account.js"></script>
    <script src="~/assets/js/tables-datatables-advanced.js"></script>
    <script src="~/assets/js/form-validation.js"></script>
    <script src="~/assets/js/pages-profile.js"></script>
    <script src="~/assets/js/navlin.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
