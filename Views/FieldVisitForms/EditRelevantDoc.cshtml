@using Microsoft.EntityFrameworkCore;
@using IndustrialContoroler.Models.Repositories;
@using IndustrialContoroler.Models.FacilityViewModels;
@model RelevantDocVM;
@inject IndustrialContorolerDatabaseContext db;

@{
    //int FaNumber = 0;
    int counter = 1;
    //int RDId = 0;
    var FaId = ViewData["FaId"];
    var RDData = db.RelevantDocs.Where(rd => rd.FaId.Equals(FaId) && rd.IsDeleted == false).ToList();
}

@if (ViewData.ContainsKey("filePath"))
{
    Console.WriteLine($"yessssssssssssssssssssss");
    Console.WriteLine($"{ViewData["filePath"]}");
    Console.WriteLine($"{ViewData["fileName"]}");
}


<div class="col-xxl " data-select2-id="30" id="statistic_2">
    <div class="card mb-4 ms-3 me-3" data-select2-id="29">
        <h5 style="background-color: rgb(82, 134, 203); color: azure;" class="card-header">تعديل الوثيقة رقم @ViewData["RDId"]</h5>

        <form method="post" enctype="multipart/form-data">
            <div class="modal-body">
                <div class="row g-3">

                    <div class="row-md-6">
                        <label asp-for="RdDocName" class="form-label fs-5">اسم الوثيقة</label>
                        <input asp-for="RdDocName" class="form-control" placeholder="اسم الوثيقة" />
                        <span asp-validation-for="RdDocName" class="text-danger"></span>
                    </div>

                    <div class="row-md-5">
                        <label asp-for="RdStakeholderName" class="form-label fs-5">اسم الجهة</label>
                        <input asp-for="RdStakeholderName" class="form-control" placeholder="اسم الجهة" />
                        <span asp-validation-for="RdStakeholderName" class="text-danger"></span>
                    </div>

                    <div class="row-md-6">
                        <label asp-for="ReFile" class="form-label fs-5">أضافة ملف الوثيقة</label>
                        <input asp-for="ReFile" class="form-control" type="file" src="~/UploadsFiles/@ViewData["fileName"]" />
                        <span asp-validation-for="ReFile" class="text-danger"></span>
                    </div>


                    <div class="row-md-6">
                        <label asp-for="ReDescription" class="form-label fs-5">الوصف</label>
                        <textarea asp-for="ReDescription" class="form-control" rows="1" placeholder="أكتب وصف الوثيقة او اي معلومات أخرى عنها."></textarea>
                    </div>


                    <input asp-for="RdId" hidden />
                    <input asp-for="FaId" hidden />

                </div>


                <div class="col justify-content-center">
                    <button type="submit" class="btn btn-primary me-1 me-sm-2"
                            asp-action="EditRelevantDoc" asp-controller="FieldVisitForms">
                        تعديل
                    </button>
                </div>

            </div>
        </form>
    </div>
</div>