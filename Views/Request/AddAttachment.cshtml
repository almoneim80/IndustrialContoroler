@using IndustrialContoroler.Models.requestsViewModels;
@using IndustrialContoroler.Models.Repositories;
@inject IndustrialContorolerDatabaseContext db;
@inject IRepository<AttachmentType> attatchmentsType;
@model RequestAttVM;



@if (TempData.ContainsKey("Error"))
{
    <div class="alert alert-danger ms-3 me-3" role="alert">@TempData["Error"]</div>
}

@if (TempData.ContainsKey("success"))
{
    <div class="alert alert-primary ms-3 me-3" role="alert">@TempData["success"]</div>
}

@{
    var GetAllAttType = db.AttachmentTypes.Where(att => att.IsDeleted == false).ToList();
}

<div class="col-xxl " data-select2-id="30" id="statistic_2">
    <div class="card mb-4 ms-3 me-3" data-select2-id="29">
        <h5 style="font-family: 'Almarai', sans-serif; font-size:20px; background-color: rgb(82, 134, 203); color: azure;" class="card-header">تعديل الطلب رقم @ViewData["ReId"]</h5>
        <form method="post" enctype="multipart/form-data">
            <div class="d-flex justify-content-between p-2">

                <div style="font-family: 'Cairo', sans-serif; font-size:16px;" class="row g-3">
                    <div class="col-md-6 ms-3">
                        <label asp-for="AttId" class="form-label fs-5">نوع المرفق</label>
                        <select asp-for="AttId" class="form-control" title="حدد نوع المرفق">
                            @foreach (var item in GetAllAttType)
                            {
                                <option value="@item.AttId">@item.AttAttachmentName </option>
                            }
                        </select>
                        <span asp-validation-for="AttId" class="text-danger"></span>
                    </div>


                    <div  class="col">
                        <label asp-for="AtUrl" class="form-label fs-5">ملف المرفق</label>
                        <input asp-for="AtUrl" class="form-control" type="file">
                        <span asp-validation-for="AtUrl" class="text-danger"></span>
                    </div>

                    <input asp-for="ReId" value="@ViewData["ReId"]" hidden />

                    <div style="font-family: 'Almarai', sans-serif; font-size:16px;" class="modal-footer ">
                        <button type="button" class="btn btn-label-secondary" data-bs-dismiss="modal">
                            الغاء
                        </button>
                        <button type="submit" asp-action="AddAttachment" asp-controller="Request" class="btn btn-primary">أضافة</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
